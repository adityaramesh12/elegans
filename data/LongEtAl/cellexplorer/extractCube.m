function outcube = extractCube(inimg, pos)%function outcube = extractCube(inimg, pos)% Find the bounding cube of inimg %% Copyright Hanchuan Peng% 20050722sz = size(inimg);if length(sz)~=3,    error('The image must be 3D in this function.');end;[xx, yy, zz] = ind2sub(sz, pos);xxmin = min(xx);xxmax = max(xx);yymin = min(yy);yymax = max(yy);zzmin = min(zz);zzmax = max(zz);sz_cube = [xxmax-xxmin+1, yymax-yymin+1, zzmax-zzmin+1];outcube = inimg(xxmin:xxmax, yymin:yymax, zzmin:zzmax);outcube(:) = 0;outcube(sub2ind(sz_cube, xx-xxmin+1, yy-yymin+1, zz-zzmin+1)) = inimg(pos);return;